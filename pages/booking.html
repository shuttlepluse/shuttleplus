<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book Transfer | Shuttle Plus</title>
    <meta name="description" content="Book your airport transfer in Addis Ababa. Flight tracking, fixed prices, and instant confirmation.">

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#597B87">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Shuttle Plus">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/images/icons/icon-152x152.png">

    <!-- Fonts and Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/booking.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar scrolled" id="navbar">
        <div class="nav-container">
            <a href="../index.html" class="logo">
                <span class="logo-text">Shuttle<span class="logo-accent">Plus</span></span>
            </a>
            <div class="nav-buttons">
                <a href="tickets.html" class="btn btn-outline">
                    <i class="fas fa-ticket-alt"></i> My Tickets
                </a>
            </div>
        </div>
    </nav>

    <!-- Booking Container -->
    <main class="booking-container">
        <!-- Progress Steps -->
        <div class="booking-progress">
            <div class="progress-step active" data-step="1">
                <span class="step-number">1</span>
                <span class="step-label">Transfer</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="2">
                <span class="step-number">2</span>
                <span class="step-label">Flight</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="3">
                <span class="step-number">3</span>
                <span class="step-label">Vehicle</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="4">
                <span class="step-number">4</span>
                <span class="step-label">Details</span>
            </div>
            <div class="progress-line"></div>
            <div class="progress-step" data-step="5">
                <span class="step-number">5</span>
                <span class="step-label">Payment</span>
            </div>
        </div>

        <!-- Booking Form -->
        <form id="bookingForm" class="booking-form">
            <!-- Step 1: Transfer Type -->
            <div class="booking-step active" data-step="1">
                <div class="step-header">
                    <h2>Select Transfer Type</h2>
                    <p>Where are you going?</p>
                </div>

                <div class="transfer-options">
                    <label class="transfer-option">
                        <input type="radio" name="transferType" value="arrival" checked>
                        <div class="option-card">
                            <div class="option-icon">
                                <i class="fas fa-plane-arrival"></i>
                            </div>
                            <h3>Airport Pickup</h3>
                            <p>From Bole International Airport to your destination</p>
                        </div>
                    </label>

                    <label class="transfer-option">
                        <input type="radio" name="transferType" value="departure">
                        <div class="option-card">
                            <div class="option-icon">
                                <i class="fas fa-plane-departure"></i>
                            </div>
                            <h3>Airport Drop-off</h3>
                            <p>From your location to Bole International Airport</p>
                        </div>
                    </label>
                </div>

                <div class="step-actions">
                    <button type="button" class="btn btn-primary btn-next" data-next="2">
                        Continue <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Step 2: Flight Details -->
            <div class="booking-step" data-step="2">
                <div class="step-header">
                    <h2>Flight Information</h2>
                    <p>Enter your flight details for automatic tracking</p>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="flightNumber">
                            <i class="fas fa-plane"></i> Flight Number
                        </label>
                        <input type="text" id="flightNumber" name="flightNumber"
                               placeholder="e.g. ET 500, LH 590" required
                               pattern="[A-Za-z]{2}\s?\d{1,4}">
                        <span class="form-hint">We'll track your flight and adjust pickup time automatically</span>
                    </div>

                    <div class="form-group" id="flightInfoGroup" style="display: none;">
                        <div class="flight-info-card">
                            <div class="flight-info-header">
                                <span class="airline-name" id="airlineName"></span>
                                <span class="flight-status" id="flightStatus"></span>
                            </div>
                            <div class="flight-info-details">
                                <div class="flight-route">
                                    <span id="flightOrigin"></span>
                                    <i class="fas fa-plane"></i>
                                    <span>Addis Ababa (ADD)</span>
                                </div>
                                <div class="flight-time">
                                    <i class="fas fa-clock"></i>
                                    <span id="flightTime"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="flightDate">
                            <i class="fas fa-calendar"></i> <span id="dateLabel">Arrival Date</span>
                        </label>
                        <input type="date" id="flightDate" name="flightDate" required>
                    </div>

                    <div class="form-group">
                        <label for="flightTime">
                            <i class="fas fa-clock"></i> <span id="timeLabel">Arrival Time</span>
                        </label>
                        <input type="time" id="flightTimeInput" name="flightTime" required>
                    </div>

                    <div class="form-group full-width">
                        <label for="destination">
                            <i class="fas fa-map-marker-alt"></i> <span id="destinationLabel">Drop-off Location</span>
                        </label>
                        <select id="destination" name="destination" required>
                            <option value="">Select destination...</option>
                            <optgroup label="Hotels Near Airport (Zone 1)">
                                <option value="Ethiopian Skylight Hotel">Ethiopian Skylight Hotel</option>
                                <option value="Golden Tulip Hotel">Golden Tulip Hotel</option>
                                <option value="Capital Hotel & Spa">Capital Hotel & Spa</option>
                            </optgroup>
                            <optgroup label="Hotels City Center (Zone 3)">
                                <option value="Sheraton Addis">Sheraton Addis</option>
                                <option value="Radisson Blu">Radisson Blu Hotel</option>
                                <option value="Hyatt Regency">Hyatt Regency</option>
                                <option value="Best Western Plus">Best Western Plus</option>
                            </optgroup>
                            <optgroup label="Business Districts">
                                <option value="Bole District">Bole District</option>
                                <option value="Kazanchis">Kazanchis Business</option>
                                <option value="African Union HQ">African Union HQ</option>
                                <option value="UN ECA">UN ECA</option>
                            </optgroup>
                            <optgroup label="Other Areas">
                                <option value="Merkato">Merkato Market</option>
                                <option value="Piazza">Piazza / City Center</option>
                                <option value="Entoto">Entoto Hill Area</option>
                                <option value="other">Other Address...</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="form-group full-width" id="customAddressGroup" style="display: none;">
                        <label for="customAddress">
                            <i class="fas fa-location-dot"></i> Enter Address
                        </label>
                        <input type="text" id="customAddress" name="customAddress"
                               placeholder="Full address or landmark">
                    </div>
                </div>

                <div class="step-actions">
                    <button type="button" class="btn btn-outline btn-prev" data-prev="1">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button type="button" class="btn btn-primary btn-next" data-next="3">
                        Continue <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Step 3: Vehicle Selection -->
            <div class="booking-step" data-step="3">
                <div class="step-header">
                    <h2>Choose Your Vehicle</h2>
                    <p>Select the vehicle class that suits your needs</p>
                </div>

                <div class="form-group">
                    <label for="passengers">
                        <i class="fas fa-users"></i> Passengers & Luggage
                    </label>
                    <select id="passengers" name="passengers" required>
                        <option value="1-2">1-2 Passengers, 2 Bags</option>
                        <option value="3-4">3-4 Passengers, 4 Bags</option>
                        <option value="5-6">5-6 Passengers, 6 Bags</option>
                        <option value="7+">7+ Passengers (Group)</option>
                    </select>
                </div>

                <div class="vehicle-options">
                    <label class="vehicle-option">
                        <input type="radio" name="vehicleClass" value="standard" checked>
                        <div class="vehicle-card">
                            <div class="vehicle-image">
                                <i class="fas fa-car"></i>
                            </div>
                            <div class="vehicle-info">
                                <h3>Standard Sedan</h3>
                                <p>Toyota Corolla or similar</p>
                                <div class="vehicle-features">
                                    <span><i class="fas fa-user"></i> 3</span>
                                    <span><i class="fas fa-suitcase"></i> 3</span>
                                    <span><i class="fas fa-snowflake"></i> AC</span>
                                </div>
                            </div>
                            <div class="vehicle-price">
                                <span class="price" id="price-standard">$30</span>
                            </div>
                        </div>
                    </label>

                    <label class="vehicle-option">
                        <input type="radio" name="vehicleClass" value="executive">
                        <div class="vehicle-card">
                            <div class="vehicle-image">
                                <i class="fas fa-car-side"></i>
                            </div>
                            <div class="vehicle-info">
                                <h3>Executive Sedan</h3>
                                <p>Toyota Camry, Mercedes E-Class</p>
                                <div class="vehicle-features">
                                    <span><i class="fas fa-user"></i> 3</span>
                                    <span><i class="fas fa-suitcase"></i> 3</span>
                                    <span><i class="fas fa-wifi"></i> WiFi</span>
                                </div>
                            </div>
                            <div class="vehicle-price">
                                <span class="price" id="price-executive">$45</span>
                            </div>
                        </div>
                    </label>

                    <label class="vehicle-option">
                        <input type="radio" name="vehicleClass" value="suv">
                        <div class="vehicle-card">
                            <div class="vehicle-image">
                                <i class="fas fa-shuttle-van"></i>
                            </div>
                            <div class="vehicle-info">
                                <h3>SUV / Minivan</h3>
                                <p>Toyota Land Cruiser, Hiace</p>
                                <div class="vehicle-features">
                                    <span><i class="fas fa-user"></i> 6</span>
                                    <span><i class="fas fa-suitcase"></i> 6</span>
                                    <span><i class="fas fa-snowflake"></i> AC</span>
                                </div>
                            </div>
                            <div class="vehicle-price">
                                <span class="price" id="price-suv">$63</span>
                            </div>
                        </div>
                    </label>

                    <label class="vehicle-option">
                        <input type="radio" name="vehicleClass" value="luxury">
                        <div class="vehicle-card premium">
                            <span class="premium-badge">Premium</span>
                            <div class="vehicle-image">
                                <i class="fas fa-gem"></i>
                            </div>
                            <div class="vehicle-info">
                                <h3>Luxury Class</h3>
                                <p>Mercedes S-Class, BMW 7-Series</p>
                                <div class="vehicle-features">
                                    <span><i class="fas fa-user"></i> 3</span>
                                    <span><i class="fas fa-suitcase"></i> 3</span>
                                    <span><i class="fas fa-star"></i> VIP</span>
                                </div>
                            </div>
                            <div class="vehicle-price">
                                <span class="price" id="price-luxury">$87</span>
                            </div>
                        </div>
                    </label>
                </div>

                <div class="extras-section">
                    <h4>Additional Options</h4>
                    <label class="checkbox-option">
                        <input type="checkbox" name="childSeat" id="childSeat">
                        <span class="checkbox-label">
                            <i class="fas fa-baby"></i> Child Seat (+$5)
                        </span>
                    </label>
                </div>

                <div class="step-actions">
                    <button type="button" class="btn btn-outline btn-prev" data-prev="2">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button type="button" class="btn btn-primary btn-next" data-next="4">
                        Continue <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Step 4: Contact Details -->
            <div class="booking-step" data-step="4">
                <div class="step-header">
                    <h2>Your Details</h2>
                    <p>We'll send your booking confirmation here</p>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="contactName">
                            <i class="fas fa-user"></i> Full Name
                        </label>
                        <input type="text" id="contactName" name="contactName"
                               placeholder="As shown on ID" required>
                    </div>

                    <div class="form-group">
                        <label for="contactPhone">
                            <i class="fas fa-phone"></i> Phone Number
                        </label>
                        <input type="tel" id="contactPhone" name="contactPhone"
                               placeholder="+251 9X XXX XXXX" required
                               pattern="\+251\d{9}">
                        <span class="form-hint">Ethiopian format: +251...</span>
                    </div>

                    <div class="form-group full-width">
                        <label for="contactEmail">
                            <i class="fas fa-envelope"></i> Email (Optional)
                        </label>
                        <input type="email" id="contactEmail" name="contactEmail"
                               placeholder="your@email.com">
                    </div>

                    <div class="form-group full-width">
                        <label for="specialRequests">
                            <i class="fas fa-comment"></i> Special Requests (Optional)
                        </label>
                        <textarea id="specialRequests" name="specialRequests" rows="3"
                                  placeholder="Any special requirements or notes for the driver..."></textarea>
                    </div>
                </div>

                <div class="step-actions">
                    <button type="button" class="btn btn-outline btn-prev" data-prev="3">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button type="button" class="btn btn-primary btn-next" data-next="5">
                        Review Booking <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- Step 5: Summary & Payment -->
            <div class="booking-step" data-step="5">
                <div class="step-header">
                    <h2>Review & Pay</h2>
                    <p>Please confirm your booking details</p>
                </div>

                <div class="booking-summary">
                    <div class="summary-section">
                        <h4><i class="fas fa-plane"></i> Transfer Details</h4>
                        <div class="summary-row">
                            <span>Type</span>
                            <span id="summaryType">Airport Pickup</span>
                        </div>
                        <div class="summary-row">
                            <span>Flight</span>
                            <span id="summaryFlight">ET 500</span>
                        </div>
                        <div class="summary-row">
                            <span>Date & Time</span>
                            <span id="summaryDateTime">Dec 15, 2025 at 14:30</span>
                        </div>
                        <div class="summary-row">
                            <span>Route</span>
                            <span id="summaryRoute">Airport â†’ Sheraton Addis</span>
                        </div>
                    </div>

                    <div class="summary-section">
                        <h4><i class="fas fa-car"></i> Vehicle</h4>
                        <div class="summary-row">
                            <span>Class</span>
                            <span id="summaryVehicle">Standard Sedan</span>
                        </div>
                        <div class="summary-row">
                            <span>Passengers</span>
                            <span id="summaryPassengers">1-2 Passengers</span>
                        </div>
                    </div>

                    <div class="summary-section">
                        <h4><i class="fas fa-user"></i> Contact</h4>
                        <div class="summary-row">
                            <span>Name</span>
                            <span id="summaryName">-</span>
                        </div>
                        <div class="summary-row">
                            <span>Phone</span>
                            <span id="summaryPhone">-</span>
                        </div>
                    </div>

                    <div class="summary-section pricing">
                        <h4><i class="fas fa-receipt"></i> Price</h4>
                        <div class="summary-row">
                            <span>Base Fare</span>
                            <span id="summaryBaseFare">$30</span>
                        </div>
                        <div class="summary-row" id="summaryChildSeatRow" style="display: none;">
                            <span>Child Seat</span>
                            <span>+$5</span>
                        </div>
                        <div class="summary-row total">
                            <span>Total</span>
                            <span id="summaryTotal">$30 <small>(1,560 ETB)</small></span>
                        </div>
                    </div>
                </div>

                <div class="payment-section">
                    <h4>Payment Method</h4>
                    <div class="payment-options">
                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="cash" checked>
                            <div class="payment-card">
                                <i class="fas fa-money-bill-wave"></i>
                                <span>Pay in Cash</span>
                            </div>
                        </label>

                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="telebirr">
                            <div class="payment-card">
                                <i class="fas fa-mobile-alt"></i>
                                <span>Telebirr</span>
                            </div>
                        </label>

                        <label class="payment-option">
                            <input type="radio" name="paymentMethod" value="stripe">
                            <div class="payment-card">
                                <i class="fas fa-credit-card"></i>
                                <span>Card</span>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="terms-section">
                    <label class="checkbox-option">
                        <input type="checkbox" name="termsAccepted" id="termsAccepted" required>
                        <span class="checkbox-label">
                            I agree to the <a href="#" target="_blank">Terms of Service</a> and
                            <a href="#" target="_blank">Cancellation Policy</a>
                        </span>
                    </label>
                </div>

                <div class="step-actions">
                    <button type="button" class="btn btn-outline btn-prev" data-prev="4">
                        <i class="fas fa-arrow-left"></i> Back
                    </button>
                    <button type="submit" class="btn btn-primary btn-submit">
                        <i class="fas fa-check"></i> Confirm Booking
                    </button>
                </div>
            </div>
        </form>

        <!-- Success State -->
        <div class="booking-success" id="bookingSuccess" style="display: none;">
            <div class="success-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2>Booking Confirmed!</h2>
            <p class="booking-reference">Reference: <strong id="bookingRef">SP-2025-XXXXXX</strong></p>
            <p>A confirmation SMS has been sent to your phone.</p>

            <div class="success-details">
                <div class="detail-item">
                    <i class="fas fa-calendar"></i>
                    <span id="successDate">Dec 15, 2025</span>
                </div>
                <div class="detail-item">
                    <i class="fas fa-clock"></i>
                    <span id="successTime">14:30</span>
                </div>
                <div class="detail-item">
                    <i class="fas fa-car"></i>
                    <span id="successVehicle">Standard Sedan</span>
                </div>
            </div>

            <div class="success-actions">
                <a href="tickets.html" class="btn btn-primary">
                    <i class="fas fa-ticket-alt"></i> View Ticket
                </a>
                <a href="../index.html" class="btn btn-outline">
                    Back to Home
                </a>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <p>Processing your booking...</p>
    </div>

    <!-- Scripts -->
    <script src="../js/main.js"></script>
    <script src="../js/app.js"></script>
    <script src="../js/offline-storage.js"></script>
    <script src="../js/api-client.js"></script>
    <script src="../js/booking.js"></script>
</body>
</html>
